package com.exploitprev.patchme;

import java.io.IOException;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class patchme extends Activity {
    /** Called when the activity is first created. */
	
	private static String logtag = "PatchMeApp";
	
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        
        Button buttonStart = (Button)findViewById(R.id.buttonStart);        
        buttonStart.setOnClickListener(startListener); // Register the onClick listener with the implementation above
      
        Button buttonStop = (Button)findViewById(R.id.buttonStop);        
        buttonStop.setOnClickListener(stopListener); // Register the onClick listener with the implementation above
    }
    
    //Create an anonymous implementation of OnClickListener
    private OnClickListener startListener = new OnClickListener() {
        public void onClick(View v) {
          Log.d(logtag,"onClick() called - install button");              
          Toast.makeText(patchme.this, "The install button was clicked.", Toast.LENGTH_LONG).show();

          try {
        	  Process nativeApp = Runtime.getRuntime().exec("/data/data/com.yourdomain.yourapp/nativeFolder/application");
          } catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
          }
          
          Log.d(logtag,"onClick() ended - install button");
        }
    };
    
    // Create an anonymous implementation of OnClickListener
    private OnClickListener stopListener = new OnClickListener() {
        public void onClick(View v) {
         Log.d(logtag,"onClick() called - remove button"); 
         Toast.makeText(patchme.this, "The remove button was clicked.", Toast.LENGTH_LONG).show();
         Log.d(logtag,"onClick() ended - remove button");
        } 
    };
    
    
	@Override
	protected void onStart() {//activity is started and visible to the user
		Log.d(logtag,"onStart() called");
	super.onStart();  
	}
 
	@Override
	protected void onResume() {//activity was resumed and is visible again
		Log.d(logtag,"onResume() called");
		super.onResume();
	}

	@Override
	protected void onPause() { //device goes to sleep or another activity appears
		Log.d(logtag,"onPause() called");//another activity is currently running (or user has pressed Home)
		super.onPause();
	}
	
	@Override
	protected void onStop() { //the activity is not visible anymore
		Log.d(logtag,"onStop() called");
		super.onStop();
	}
	
	@Override
	protected void onDestroy() {//android has killed this activity
		Log.d(logtag,"onDestroy() called");
		super.onDestroy();
	}

}